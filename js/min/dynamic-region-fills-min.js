function initialize(){geocoder=new google.maps.Geocoder;var e={zoom:6,center:new google.maps.LatLng(54.897321,-2.933645),mapTypeId:google.maps.MapTypeId.ROAD,disableDefaultUI:!0,draggable:!0,scrollwheel:!0,backgroundColor:"#f2f7fb",disableDoubleClickZoom:!0,clickable:!0};map=new google.maps.Map(document.getElementById("map"),e),map.setOptions({styles:styles});var o=document.createElement("script"),t="SELECT geometry, rep, name FROM 1BlJA1Svax75AHjS7FNY2fS4HGflwNN9m33nV289u",n=encodeURIComponent(t),l=["https://www.googleapis.com/fusiontables/v1/query?"];l.push("sql="),l.push(n),l.push("&callback=drawMap"),l.push("&key=AIzaSyAm9yWCV7JPCTHCJut8whOjARd7pwROFDQ"),o.src=l.join("");var s=document.getElementsByTagName("body")[0];s.appendChild(o)}function addToLegend(e,o){""==e&&(e=" - ");var t=document.getElementById("legend");t.innerHTML=t.innerHTML+'<li class="list-group-item">'+e+'<span style="background:'+colour_spectrum[o]+';" class="badge">&nbsp;</span></li>'}function constructNewCoordinates(e){var o=[],t=e.coordinates[0];for(var n in t)o.push(new google.maps.LatLng(t[n][1],t[n][0]));return o}function drawMap(e){var o=e.rows;for(i in o){var t=[],n=o[i][0].geometries,l,s=new google.maps.InfoWindow;if(n)for(var a in n)t.push(constructNewCoordinates(n[a]));else t=constructNewCoordinates(o[i][0].geometry);l=new google.maps.Polygon({paths:t,strokeColor:"#FFFFFF",strokeOpacity:1,strokeWeight:.7,fillOpacity:.8,clickable:!0,indexID:o[i]});var r=options.indexOf(o[i][1]);-1===r?(options.push(o[i][1]),l.setOptions({fillColor:colour_spectrum[options.length-1],colourID:options.length-1}),count[options.length-1]=1,addToLegend(o[i][1],options.length-1)):(count[r]++,l.setOptions({fillColor:colour_spectrum[r],colourID:r})),google.maps.event.addListener(l,"click",function(e){s.setContent("<code>"+this.indexID[2]+"</code> - "+this.indexID[1]),s.setPosition(e.latLng),s.open(map)}),polys.push(l),l.setMap(map)}document.getElementById("SHOW_LEGEND").removeAttribute("disabled"),document.getElementById("legend_panel").removeAttribute("style"),console.group("Summary - "+options.length+" dimensions, "+o.length+" items in total."),options.length>colour_spectrum.length&&console.warn("More options than colours! Be careful here"),console.groupCollapsed("Dimensions");for(i in options)console.log(i+". '"+options[i]+"' ("+count[i]+")");console.groupEnd(),console.groupEnd()}var colour_spectrum=["#FF5335","#B29C85","#306E73","#3B424C","#1D181F"],map,google,i,geocoder,polys=[],options=[],count=[],console,styles=[{featureType:"all",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]}];google.maps.event.addDomListener(window,"load",initialize),$(document).ready(function(){$("#SHOW_LEGEND").click(function(){$(".right-flyout").toggleClass("slideInRight"),$(".right-flyout").toggleClass("slideOutRight"),$(this).parent().toggleClass("active")})});